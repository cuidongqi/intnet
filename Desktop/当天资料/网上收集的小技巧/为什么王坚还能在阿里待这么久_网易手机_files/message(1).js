!function(){var e=function(e,i,t){if(window.addEventListener)e.addEventListener(i,t,!1);else e.attachEvent("on"+i,t)};var i=function(e,i,t){if(window.removeEventListener)e.removeEventListener(i,t);else e.detachEvent("on"+i,t)};var t={},n,r,a=[],o;t.flag=!1;t.getDiscoverCss=function(){var e="";if(this.__coverBackground&&this._$supportCss3("animation"))e=this.__coverBackground.indexOf("background:")!=-1?this.__coverBackground:"";return"position:fixed;_position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden;background:rgb(0,0,0); filter:progid:DXImageTransform.Microsoft.Alpha(opacity=60);-moz-opacity:0.6;-khtml-opacity:0.6;opacity:0.6;z-index:1000;"+e};t.getPanelCss=function(e,i){return"position:fixed;z-index:10000;left:50%;top:50%;width:"+e+"px;margin-left:-"+e/2+"px;height:"+i+"px;margin-top:-"+i/2+"px;"};t.getIframeCss=function(){var e=null;if(this.__iframeShowAnimation)e="-webkit-animation:"+this.__iframeShowAnimation+";-moz-animation:"+this.__iframeShowAnimation+";-ms-animation:"+this.__iframeShowAnimation+";-o-animation:"+this.__iframeShowAnimation+";animation:"+this.__iframeShowAnimation+";";return"width:100%;height:100%;border:none;background:none;"+(e?e:"")};t.setOpacity=function(e,i){e.style.opacity=i/100};t.setWh=function(e,i,t){e.style.cssText=this.getPanelCss(i,t)};t.addIframe=function(e,i){var n=document.getElementById("x-URS-iframe"),r=this._name||"";if(!n){try{n=document.createElement('<iframe  name="'+r+'" allowTransparency=true ></iframe>')}catch(a){n=document.createElement("iframe");n.allowTransparency=!0;n.name=r}n.frameBorder=0;n.id="x-URS-iframe";n.scrolling="no";n.style.cssText=this.getIframeCss()}if(i)e.appendChild(n);else{var o=420,s=408;if(t.frameSize){o=t.frameSize.width;s=t.frameSize.height}var c=document.getElementById("x-discover");if(!c){c=document.createElement("div");c.id="x-discover";c.style.cssText=this.getDiscoverCss()}var f=document.getElementById("x-panel");if(!f){f=document.createElement("div");f.id="x-panel";this._panel=f;f.style.cssText=this.getPanelCss(o,s)}f.appendChild(n);e.appendChild(c);e.appendChild(f);e.style.display="none"}};t.initIframe=function(e){var i=document.getElementById("x-URS-iframe");if(r.afterSetIframeSrc)r.afterSetIframeSrc(i);window.setTimeout(function(){i.src=n},0);this.sto=clearTimeout(this.sto);if(window._$needUrsBgp)if(1!=e)this.sto=setTimeout(function(){this.sto=clearTimeout(this.sto);if(n.indexOf("webzj.reg.163.com")>=0){n=n.replace("webzj.reg.163.com","webzj2.reg.163.com");t.initIframe.call(this,1)}},1e4)};t._$supportCss3=function(e){var i=["webkit","Moz","ms","o"],t,n=[],r=document.documentElement.style,a=function(e){return e.replace(/-(\w)/g,function(e,i){return i.toUpperCase()})};for(t in i)n.push(a(i[t]+"-"+e));n.push(a(e));for(t in n)if(n[t]in r)return!0;return!1};var s=function(){var e=document.getElementById("x-URS-iframe");var i=window.name||"_parent";var t={};t.data=r;t.data.from="URS|";t.origin="*";t.source=i;l(e.contentWindow,t)};var c=function(){var e=/^([\w]+?:\/\/.*?(?=\/|$))/i;return function(i){i=i||"";if(e.test(i))return RegExp.$1;else return"*"}}();var f=function(e,i){try{i=i.toLowerCase();if(null===e)return"null"==i;if(void 0===e)return"undefined"==i;else return Object.prototype.toString.call(e).toLowerCase()=="[object "+i+"]"}catch(t){return!1}};var d=function(e,i,t){if(!e)return"";var n=[];for(var r in e)if(e.hasOwnProperty(r)){var a=e[r];if(a)if(!f(a,"function")){if(f(a,"date"))a=a.getTime();else if(f(a,"array"))a=a.join(",");else if(f(a,"object"))a=JSON.stringify(a);if(t)a=encodeURIComponent(a);n.push(encodeURIComponent(r)+"="+a)}else;else;}else;return n.join(i||",")};var l=function(){var e="MSG|";var i=function(i){var t={};i=i||{};t.origin=i.origin||"";t.ref=location.href;t.self=i.source;t.data=JSON.stringify(i.data);return e+d(t,"|",!0)};return function(e,t){if(window.postMessage){t=t||{};e.postMessage(JSON.stringify(t.data),c(t.origin))}else a.unshift({w:e,d:escape(i(t))})}}();var u=function(){var e=navigator.appName;if("Netscape"==e){var i=window.open("about:blank","_self");i.opener=null;i.close()}else if("Microsoft Internet Explorer"==e){window.opener=null;window.open("","_self");window.close()}};window.URS=function(d,l,m){1==this._$COM_NUM?this._$COM_NUM=1:this._$COM_NUM=2;if("object"==typeof d)m=d;t.frameSize=m.frameSize;t.__coverBackground=m.coverBackground;t.__iframeShowAnimation=m.iframeShowAnimation;window.PTDOM=0!=m.isHttps?"https://":"http://";if(m.cssDomain&&m.cssFiles){t.__cssStr="cd="+m.cssDomain+"&cf="+m.cssFiles;if(t.__cssStr.indexOf("http://")!=-1)window.PTDOM="http://";t.__cssStr=encodeURIComponent(t.__cssStr)}this.isInclude=0;if(m.includeBox)if("string"==typeof m.includeBox)this.isInclude=document.getElementById(m.includeBox)||0;else this.isInclude=m.includeBox;t.needPrepare=m.needPrepare||0;var p,h;if("string"==typeof l)h=l;if("string"==typeof d)p=document.getElementById(d);else p=d;if(m.logincb)this.logincb=m.logincb;if(m.closecb)this.closecb=m.closecb;if(m.regcb)this.regcb=m.regcb;if(m.statecb)this.statecb=m.statecb;if(m.resize)this.resize=m.resize;if(m.changepage)this.changepage=m.changepage;if(m.initReady)this.initReady=m.initReady;o=document.createElement("div");o.id="x-URS";document.body.appendChild(o);this.box=o;var g="index.html";if(m.single){g="index_dl.html";if("register"==m.page)g="index_reg.html"}var w=m.crossDomainUrl||"webzj.reg.163.com/out/pub/";n=window.PTDOM+w+g;if(m.pathB)n=n.replace(/\:\/\/([^\/]+\/)/,function(e){return e+"b/"});if(t.__cssStr)n+="?"+t.__cssStr+"&wdaId="+(m.wdaId||"");else n+="?wdaId="+(m.wdaId||"");r=m||{};try{JSON.stringify(r)}catch(v){return null}if(!this.isInclude&&p&&h)e(p,h,this.showIframe);else this.includeBox=this.isInclude;if(t.needPrepare||this.isInclude)this.prepareIframe();var y=function(e){if(e)e.stopPropagation?e.stopPropagation():e.cancelBubble=!0};var I=function(e){y(e);var i=e.data||"{}";S({data:i,origin:c(e.origin)})};var _=this;var S=function(e){var n=e.data;var r;if(_.isInclude)r=_.includeBox;else r=t._panel;if(n){if("string"==typeof n)try{n=JSON.parse(n)}catch(a){n={}}if(n["URS-READY"]){_.sto=clearTimeout(_.sto);if(_.initReady)_.initReady()}if(!n["URS-READY"]||!_.isInclude&&t.needPrepare){if(n["URS-READY"]&&!t._initReady)t._initReady=!0;if(n["URS-CM"]&&document.getElementById("x-URS-iframe"))if(!n["URS-CM-STATE"])if(!n||!n.fromOutLogin||n.toOpener){if("success"==n.type){if(_.logincb)_.logincb(n["username"],n["isOther"],n);if(!this.isInclude){if(p&&h)i(p,h,_.showIframe);_.closeIframe()}}else if("close"==n.type){if(_.closecb)_.closecb();_.closeIframe()}else if("resize"==n.type||"init"==n.type){r.style.width=n.width+"px";r.style.height=n.height+"px";if(!_.isInclude)r.style.marginLeft=-1*n.width/2+"px";if(_.resize)_.resize(n)}else if("register-success"==n.type){if(_.regcb)_.regcb(n["username"],n["url"])}else if("changepage"==n.type)if(_.changepage)_.changepage(n["page"])}else{try{window.opener.$outLogin(n)}catch(a){}setTimeout(function(){u()},200)}else if(_.statecb)_.statecb(n["URS-CM-STATENAME"],n["URS-CM-STATE"])}else s()}};var b=function(){var e="MSG|";var i=function(e,i){var t=f(i,"function")?i:function(e){return e===i},n=null;for(var r=0,a=e.length-1,o;r<a;r++){o=e[r];if(t(o))n=r}return null!=n?n:-1};var t=function(){var e;var t=function(t,n,r){if(i(e,t.w)<0){e.push(t.w);r.splice(n,1);t.w.name=t.d}};return function(){e=[];if(a&&a.length)for(var i=a.length,n;i--;i>=0){n=a[i];t(n,i,a)}e=null}}();var n=function(){var i=unescape(window.name||"");if(i&&0==i.indexOf(e)){window.name="";var t=i.replace(e,""),n=t.split("|"),r=n.length,a={};for(var o=0;o<r;o++){var s=n[o].split("=");if(!s||!s.length)return;var f=s.shift();if(!f)return;a[decodeURIComponent(f)]=decodeURIComponent(s.join("="))}t=a;var d=(t.origin||"").toLowerCase();if(!d||"*"==d||0==location.href.toLowerCase().indexOf(d))S({data:t.data||"null",origin:c(t.ref||document.referrer)})}};return function(){setInterval(t,100);setInterval(n,20)}}();var x=function(){if(!window.__hasRun){if(window.postMessage)e(window,"message",I);else b();window.__hasRun=1}};return x()};window.URS.prototype.prepareIframe=function(){if(this.isInclude){t.addIframe(this.includeBox,1);t.initIframe.call(this);this.showIframe()}else{t.addIframe(o);t.initIframe.call(this)}};window.URS.prototype.showIframe=function(e){if(!this.isInclude)if(!t.needPrepare){t.addIframe(o);t.initIframe.call(this)}else if(!t._initReady)return;e=e||{};if(e.page){if(e.page!=r.page&&r.single){var i="index_dl.html";if("register"==e.page)i="index_reg.html";var a=e.crossDomainUrl||"webzj.reg.163.com/out/pub/";if(e.pathB)n=n.replace(/\:\/\/([^\/]+\/)/,function(e){return e+"b/"});n=window.PTDOM+a+i;if(t.__cssStr)n+="?"+t.__cssStr+"&wdaId="+(e.wdaId||"");else n+="?wdaId="+(e.wdaId||"")}t.initIframe.call(this);r.page=e.page}if(t.needPrepare&&!this.isInclude)s();o.style.display="block"};window.URS.prototype.closeIframe=function(){if(!this.isInclude){o.style.display="none";t.initIframe.call(this);if(!t.needPrepare){t.flag=!1;if(navigator.userAgent.indexOf("MSIE")>0){var e=document.getElementById("x-URS-iframe"),i=e.contentWindow;if(e){e.src="about:blank";try{i.document.write("");i.document.clear()}catch(n){}}var r=document.getElementById("x-panel");r.removeChild(e);window.CollectGarbage()}o.innerHTML=""}}else;}}();
(function(){var a=function(b){this.config=this.mix({id:"",user:"zhidao",logid:"111",title:document.title,page_url:location.href,classname:"baidu-highlight",frequency:3,maxword:20},b);this.initElement(typeof this.config.id=="string"?this.config.id.split(","):this.config.id);this.wordnum=0;this.frequencyCache={};this.request()};a.prototype={cacheFilter:{},mix:function(b,c){for(var d in c){b[d]=c[d]}return b},jsonp:function(d){var f=document.getElementsByTagName("head")[0]||document.body,c=document.createElement("script"),b=this;window[b.cid]=function(h){b.response(h);try{delete window[b.cid]}catch(i){}};c.charset=document.charset||document.characterSet||"gb2312";c.src=d;try{f.appendChild(c)}catch(g){b.log({fm:"tool",r_type:"wordnererror_jsonp",e:g.message})}},param:function(){var c=[];for(var b in this.config){c.push(b+"="+encodeURIComponent(this.config[b]))}return c},initElement:function(h){var f=0,b=h.length,g,c=this,d;c.element=[];for(;f<b;f++){if(d=document.getElementById(h[f])){c.element.push(d)}}},match:function(){var b={};return function(d,c){return b[c]||(b[c]=new RegExp("("+c.join("|")+")","ig"))}}(),safeReg:function(b){return b.replace(/(\+|\\|\/|\[|\]|\{|\}|\*|\?|\$|\^|\||\(|\)|\.)/g,function(c,d){return"\\"+c})},highlight:function(d,r){if(d.nodeType==1){if(d.nodeName!=="A"){if(d.hasChildNodes){var o=d.childNodes;var q=0;var f;while(f=o[q++]){this.highlight(f,r)}}}}else{if(d.nodeType===3&&!this.cacheFilter[d.value]){var m=this.filter(d.nodeValue);var p=d.parentNode;var s=this;var k=0;var j=s.match(m,r);if(m.match(j)){s.cacheFilter[d.value];m=m.replace(j,function(e){var i=e.toLowerCase();if(!s.frequencyCache[i]){s.frequencyCache[i]=1;s.wordnum++}if(s.wordnum>s.config.maxword){return e}if(s.frequencyCache[i]++<=s.config.frequency){return'<a href="'+s.getHref(e)+'" target="_blank" class="'+s.config.classname+'" >'+e+"</a>"}else{return e}})}try{var b=document.createElement("div");var o=b.childNodes;b.innerHTML=m;for(var h=0,g=o.length;h<g;h++){var c=o[h].cloneNode(true);if(c.nodeType==1){if(c.className==s.config.classname){c.onclick=function(){s.log({fm:"click",r_type:"text",r_wd:this.innerHTML})}}}p.insertBefore(c,d)}p.removeChild(d)}catch(n){s.log({fm:"tool",r_type:"wordnererror_bind",e:n.message})}}}},filter:function(b){return b.replace(/</ig,"&lt;").replace(/>/ig,"&gt;")},getProtocol:function(){var b=(navigator&&navigator.userAgent?navigator.userAgent:"");if(b.match(/chrome|firefox|safari|msie 10|rsv:11|msie [89]/i)){return"https:"}return"http:"},getHref:function(c){var e=this.getProtocol(),b=this.paraminfo,d=[];if(b.r_tn){d.push("tn="+b.r_tn)}if(b.fenlei){d.push("fenlei="+encodeURIComponent(b.fenlei))}return e+"//www.baidu.com/s?wd="+encodeURIComponent(c)+"&"+d.join("&")},render:function(k){var c=this.element;var j=[];var m=this;var d=c.length;var b;this.cache={};try{for(var g=0,f=k.length;g<f;g++){b=k[g].word;this.cache[b]=k[g];j.push(this.safeReg(b))}for(var h=0;h<d;h++){this.highlight(this.element[h],j)}}catch(h){m.log({fm:"tool",r_type:"wordnererror",e:h.message})}m.log({fm:"load",r_type:"wordner_load"})},log:function(f){var c=this.mix({pid:201,productline:"cun",productsub:"cun",pj:"ext_hl",tab:"query",logactionid:"0100100002",mod:"cun",logtype:"vgif",t:+new Date,r_tn:this.paraminfo.r_tn,r_tu:this.paraminfo.r_tu},f),e=[],b=new Image;if(f.fm=="click"){c=this.mix(c,this.cache[f.r_wd]||{})}c=this.mix(c,this.paraminfo);for(var d in c){e.push(d+"="+encodeURIComponent(c[d]))}b.src=(window.DSPUIDOMINURI||(location.protocol+"//entry.baidu.com"))+"/rp/v.gif?"+e.join("&")},response:function(c){var b=this;try{if((c.err_no=="0")&&c.word_list){if(c.word_list.length>0){var d=c.word_list;this.paraminfo=c.param_info;this.render(d.length>this.config.maxlength?d.splice(0,this.config.maxlength):d)}}}catch(f){b.log({fm:"tool",r_type:"wordnererror_response",e:f.message});window.console&&console.log(f)}},request:function(){var d=this.param(),c=+new Date,b=this;d.push("jsonp="+(b.cid="baidu_hh_"+c));d.push("r_new=true");b.jsonp((window.DSPUIIFRAMEURI||(location.protocol+"//entry.baidu.com/rp/wordner"))+"?"+d.join("&"))}};new a(window.baidu_hh_hotword||{})})();
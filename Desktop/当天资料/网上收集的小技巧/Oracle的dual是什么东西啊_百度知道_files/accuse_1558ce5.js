define("question:widget/sample/js/accuse/accuse.js",function(e,t,a){function s(e){if(!(e&&F.context("user").gradeIndex>=3))return!1;if(-1!=e.indexOf("answer")){var t=e.replace(/[^\d]/gi,""),a=F.context("answers")[t],s=F.context("page").qid;return a?"1"==a.isCurrentUser?!1:{typeid:1,itemid:t,itemqid:s,userid:a.uid}:!1}return"1"==F.context("user").isAsker?!1:{typeid:0,itemid:F.context("page").qid,userid:F.context("page").uid}}function c(e){n(e.target).hide().each(function(t,a){var c=n(a).parents("."+e.response),p=c.prop("id"),l=s(p||"");if(l){var r='<span class="f-pipe">|</span>',d=n("<span />").prop("class","wgt-accuse f-aid").html(['<em class="accuse-enter"><i class="iknow-qb_home_icons i-arrow-accuse"></i>\u4e3e\u62a5</em>','<span class="accuse-tip" alog-group="qb-tip-accuse">',F.context("user").answerNumber>50?'<a href="javascript:;" class="low-quality-btn f-aid">\u63cf\u8ff0\u4e0d\u6e05</a>':"",'<a href="#" class="accuse-btn f-aid" log="area:panel,pos:accuse,action:click">\u8fdd\u89c4\u68c0\u4e3e</a>','<a href="http://tousu.baidu.com/zhidao/add#3" log="area:panel,pos:tousu,action:click" class="f-aid accuse-ts" target="_blank">\u4fb5\u6743\u6295\u8bc9</a>',"</span>"].join("")).appendTo(a)["wgt-ask"==e.response?"before":"1"==F.context("user").isAsker&&"wgt-best"!=e.response?"before":"after"](r);c.mouseover(function(){n(a).show()}).mouseout(function(){n(a).hide()});var g=d.find(".accuse-tip");d.mouseenter(function(){g.show()}).mouseleave(function(){g.hide()}),d.find(".accuse-btn").click(function(e){try{o.fire("accuse.action",{params:l}),e.preventDefault()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"question:widget/sample/js/accuse/accuse.js",method:"",ln:93})}}),d.find(".accuse-ts").click(function(e){try{window.open("http://tousu.baidu.com/zhidao/add?tsurl="+encodeURIComponent(location.href)+"#3"),e.preventDefault()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"question:widget/sample/js/accuse/accuse.js",method:"",ln:97})}}),d.find(".low-quality-btn").click(function(e){try{i.send({pid:102,type:2014,page:"question",postion:"low-quality-btn",action:"btn-click"});var t=u.confirm('<p class="confirm-text">\u786e\u8ba4\u5f53\u524d\u95ee\u9898\u63cf\u8ff0\u4e0d\u6e05\uff0c\u65e0\u6cd5\u4f5c\u7b54\uff1f</p><p class="ps-text">\u6ce8\uff1a\u70b9\u51fb\u201c\u786e\u5b9a\u201d\u540e\uff0c<span>\u5f53\u524d\u9875\u9762\u5c06\u88ab\u5173\u95ed</span></p>',{buttons:[{text:"\u786e\u5b9a",click:function(){try{n.ajax({url:"/submit/ajax",type:"POST",dataType:"json",data:{cm:100018,qid:F.context("page").qid}}),i.send({pid:102,type:2014,page:"question",postion:"low-quality-btn",action:"btn-click-ok"}),setTimeout(function(){window.close()},200)}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"question:widget/sample/js/accuse/accuse.js",method:"",ln:129})}}},{text:"\u53d6\u6d88",click:function(){try{i.send({pid:102,type:2014,page:"question",postion:"low-quality-btn",action:"btn-click-cancel"}),t.close()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"question:widget/sample/js/accuse/accuse.js",method:"",ln:141})}}}],className:"question-low-quality-confirm"})}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"question:widget/sample/js/accuse/accuse.js",method:"",ln:145})}})}})}var n=e("common:widget/js/util/tangram/tangram.js"),i=e("common:widget/js/util/log/log.js"),o=e("common:widget/js/util/event/event.js"),u=(e("common:widget/js/logic/login/login.js"),e("common:widget/js/ui/dialog/dialog.js"));o.on("accuse.action",function(e,t){o.fire("login.check",{isLogin:function(){{var e={content:"//zhidao.baidu.com/smartmis/click?"+n.url.jsonToQuery(t.params,encodeURIComponent),title:"\u6211\u6765\u68c0\u4e3e",width:400,height:370,autoDispose:!0};u.iframe(e)}}})}),a.exports.init=function(e){try{var t=n.extend({response:"accuse-response",target:".accuse-area"},e||{});c(t)}catch(a){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:a.message,path:"question:widget/sample/js/accuse/accuse.js",method:"",ln:187})}}});
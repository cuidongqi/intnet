"use strict";function containerHandle(t){var e=t.tool;t.setting;e(".js-tieachor").on("click",function(n){n.preventDefault();var i=e(this);setTimeout(function(){var n=i.attr("href"),s=e(n),o=s.find("."+t.setting.formCls.boxWrapper),a=o.child(0),r=o.child(1);e.scrollY(s,200),a[0].focus(),r.hide()},100),t.operator.actionStatistic("GTnews_newsTitle_iconReply")}),e(".js-tielink").attr("href",t.global.threadInfo.commentPageURL),e(".js-tiecount").html(t.global.threadInfo.tcount),e(".js-tiejoincount").html(t.global.threadInfo.joinCount),e(".post_icon_tie").on("click",function(e){t.operator.actionStatistic("GTnews_pageLeft_iconReply")}),e(".js-tielink").eq(0).on("click",function(e){t.operator.actionStatistic("GTnews_pageLeft_joinCount")}),e(".js-tielink").eq(1).on("click",function(e){t.operator.actionStatistic("GTnews_postArea_tieCount")}),e(".js-tielink").eq(2).on("click",function(e){t.operator.actionStatistic("GTnews_postArea_joinCount")}),e(".post_comment_comment").on("click",function(){t.operator.actionStatistic("GTnews_quickPost")}),e(".post_comment_do").on("click",function(){t.operator.actionStatistic("GTnews_quickPost")}),e("#post_comment_closed")&&e(".post_comment_closeTip a").on("click",function(){t.operator.actionStatistic("GTnews_tieClose")});var n=e("#tieCount"),i=0;try{i=t.global.threadInfo.tcount}catch(s){}n.find("a").html(i),n.on("click",function(e){window.open(t.global.threadInfo.commentPageURL,"_blank")}),"photoview_bbs"===t.global.threadInfo.boardId&&e(".comment").attr("href",t.global.threadInfo.commentPageURL).html("\u8bc4\u8bba <span>( </span><b>"+t.global.threadInfo.joinCount+"</b><span> )"),"off"===t.global.threadInfo.status.web&&(e("#post_comment_area")&&e("#post_comment_area").css({display:"none"}).next().css({marginTop:"50px"}),e(".post_tie_top")&&e(".post_tie_top").css({display:"none"}),e("#post_comment_closed")&&e("#post_comment_closed").css({display:"none"})),e(document.body).on("click",function(e){t.view.hideInputCheckTips(e)})}var Tie=window.Tie||{};!function(t){function e(t,e){var i,s,o,a,r,l,c,p,d,u,h,f,g=[],v=t.split(I),y=[e];for(o=0,a=v.length;o<a;o++){for(i=v[o],s=i.replace(P,""),r=0,l=y.length;r<l;r++)e=y[r],S.test(i)?(h=S.exec(s),c=h[1],f=document.getElementById(c),f&&m.contains(e,f)&&g.push(f)):B.test(i)&&(h=B.exec(s),p=h[1],g=g.concat(n(p,e))),P.test(i)&&(h=P.exec(i),d=h[1],u=h[2],g=m.map(g,function(t){return t[d]===u?t:null}));o!==a-1&&(y=g,g=[])}return g}function n(t,e,n){for(var i=[],s=e.getElementsByTagName(n||"*"),o=s.length,a=new RegExp("(^|\\s)"+t+"(\\s|$)"),r=0,l=0;r<o;r++)a.test(s[r].className)&&(i[l]=s[r],l++);return i}function i(t){return t.replace(/-(\w+?)/g,function(t){return t.toUpperCase()})}function s(t){var e="length"in t&&t.length,n=typeof t;return"function"!==n&&!m.isWindow(t)&&(!(1!==t.nodeType||!e)||("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t))}function o(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function a(t,e){for(var n,i=0;i<t.length;i++)if(m.contains(t[i],e)){n=t[i];break}return n}function r(t){var e="mouseover, mouseout, click, keydown, keypress";return e.indexOf(t)>-1}function l(t,e,n,i){document.addEventListener?t.addEventListener(e,n,i):(e=L[e]?L[e].delegateType:e,t.attachEvent("on"+e,n))}function c(t){return t=t||window.event,t.target||(t.target=t.srcElement),t.preventDefault||(t.preventDefault=function(){t.returnValue=!1}),t}function p(t,e,n){var i,s=t.status;if(s>=200&&s<300){switch(e.dataType){case"text":i=t.responseText;break;case"json":i=function(n){try{return JSON.parse(n)}catch(i){try{return new Function("return "+n)()}catch(i){e.failure(t)}}}(t.responseText);break;case"xml":i=t.responseXML;break;default:i=t}"undefined"!=typeof i&&n(i)}t=null}function d(t,e,n){var i=new XMLHttpRequest,s=t.data,o=t.type,a=t.url;if(s&&"object"==typeof s&&(s=m.serialize(s)),"GET"===o&&s&&(a+=(A.test(a)?"&":"?")+s,s=null),a+=(A.test(a)?"&":"?")+"_="+j++,i.open(o,a,t.async),"POST"===o&&i.setRequestHeader("Content-type",t.contentType),n)for(var r in n)i.setRequestHeader(r,n[r]);return i.withCredentials=!0,i.send(s),i.onreadystatechange=function(){4===i.readyState&&p(i,t,e)},i}function u(t,e){function n(){i=void 0,a.onload=a.onreadystatechange=null,N.removeChild(a),a=void 0;try{delete window[t.jsonpCallback]}catch(e){window[t.jsonpCallback]=void 0}}var i,s=t.data,o=t.url,a=document.createElement("script");t.jsonpCallback=t.jsonpCallback||m.expando+"_"+j++,s&&(s="object"==typeof s?m.serialize(s):s,o+=(A.test(o)?"&":"?")+s,s=null),o+=(A.test(o)?"&":"?")+t.jsonp+"="+t.jsonpCallback,o+=(A.test(o)?"&":"?")+"_="+j++,a.src=o,a.setAttribute("async",!0),a.charset=t.scriptCharset,N.appendChild(a),window[t.jsonpCallback]=function(){i=arguments},a.onload=a.onreadystatechange=function(){this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(e&&e(i&&i[0]),n())},a.onerror=function(){e(null),n()}}function h(t,e){function n(t){var n,i,s;try{n=a.contentDocument,i=n.location,s=n.body.innerHTML}catch(o){}e&&e(s,i,n)}var i,s,o,a,r="",l=t.data,c=document.charset;0===m("#tie_sdk_util_frame").length&&(o=m(document.body),i='<iframe src="javascript:false;" name="tie_sdk_util_frame" id="tie_sdk_util_frame" border="no" style="display: none;"></iframe>',o.append(i),s='<form id="tie_sdk_util_form" method="post" action="" target="tie_sdk_util_frame" accept-charset="'+t.scriptCharset+'" onsubmit="document.charset=\''+t.scriptCharset+'\';" style="display: none;"></form>',o.append(s)),i=m("#tie_sdk_util_frame"),s=m("#tie_sdk_util_form").empty(),a=i[0],a.attachEvent?a.attachEvent("onload",n):a.onload=n,s.attr("action",t.url);for(var p in t.data)r+='<input type="hidden" name="'+p+'" value="'+l[p]+'">';s.append(r);try{document.charset=t.scriptCharset}catch(d){}s[0].submit();try{document.charset=c}catch(d){}t.removeIframe&&(i.remove(),s.remove())}function f(t){var e,n=!1;return E.test(t)&&(e=E.exec(t.toLowerCase()),e[0]!==D[0]&&(n=!0)),n}var m=function(t,e){return new m.fn.init(t,e)},g="1.0",v=[],y=v.splice,w=v.slice,T=v.concat,b=Array.isArray||function(t){return t instanceof Array},C=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,k=/checked/gi,I=/\s+/,x=/[\t\r\n]/g;m.fn=m.prototype={tool:g,constructor:m,length:0,push:v.push,sort:v.sort,splice:y,size:function(){return this.length},pushStack:function(t){var e=m.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t){for(var e=0;e<this.length;e++)t.call(this[e],e)},slice:function(){return this.pushStack(w.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},find:function(t){var e,n,i=this.length,s=[];for(e=0;e<i;e++)n=m(t,this[e]),m.each(n,function(t,e){s.push(e)});return s=this.pushStack(i>1?m.unique(s):s)},html:function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;for(;n<i;n++)e=this[n],1===e.nodeType&&(e.innerHTML=t);return this},val:function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.value;for(;n<i;n++)e=this[n],1===e.nodeType&&(e.value=t);return this},attr:function(t,e){var n=this[0]||{},i=0,s=this.length;if(void 0===e&&1===n.nodeType)return k.test(t)?n[t]:n.getAttribute(t);if("string"==typeof e){for(;i<s;i++)n=this[i],1===n.nodeType&&(k.test(t)?n[t]=e:n.setAttribute(t,e));return this}},addCls:function(t){var e,n,i=0,s=this.length;if(t)for(;i<s;i++)e=this[i],1===e.nodeType&&(e.classList?e.classList.add(t):(n=" "+e.className+" ",n+=t+" ",e.className=m.trim(n)));return this},delCls:function(t){var e,n,i=0,s=this.length;if(t)for(;i<s;i++)e=this[i],1===e.nodeType&&(e.classList?e.classList.remove(t):(n=(" "+e.className+" ").replace(x," "),n.indexOf(" "+t+" ")>=0&&(n=n.replace(" "+t+" "," ")),e.className=m.trim(n)));return this},tglCls:function(t){var e,n,i=0,s=this.length;if(t)for(;i<s;i++)e=this[i],1===e.nodeType&&(e.classList?e.classList.toggle(t):(n=this.eq(i),n.hasCls(t)?n.delCls(t):n.addCls(t)));return this},hasCls:function(t){var e,n=0,i=this.length;if(t)for(;n<i;n++)if(e=this[n],1===e.nodeType)if(e.classList){if(e.classList.contains(t))return!0}else if((" "+e.className+" ").replace(x," ").indexOf(t)>=0)return!0;return!1},show:function(){for(var t,e=0,n=this.length;e<n;e++)t=this[e],t.style.display="";return this},hide:function(){for(var t,e=0,n=this.length;e<n;e++)t=this[e],t.style.display="none";return this},position:function(){var t=this[0],e=t.getBoundingClientRect(),n=document.documentElement,i=document.body;return{left:e.left+(n.scrollLeft||i.scrollLeft),top:Math.abs(e.top)+(n.scrollTop||i.scrollTop)}},offset:function(){var t=this[0],e=t.getBoundingClientRect();return{left:e.left,top:e.top}},css:function(){var t,e,n=0,s=arguments[0];if(arguments.length>1||"object"==typeof s){for(;null!=(t=this[n]);n++)if(1===t.nodeType||11===t.nodeType||9===t.nodeType)for(e in s)t.style[e]=s[e];return this}return t=this[0],window.getComputedStyle?window.getComputedStyle(t).getPropertyValue(s):t.currentStyle.getAttribute(i(s))},width:function(t){var e,n,i,s=0;if(t&&"number"==typeof t){for(;null!=(e=this[s]);s++)1===e.nodeType&&(e.style.width=t+"px");return this}return e=this[0],m.isWindow(e)?n=e.document.documentElement.clientWidth:9===e.nodeType?(i=e.documentElement,n=Math.max(e.body.scrollWidth,i.scrollWidth,e.body.offsetWidth,i.offsetWidth,i.clientWidth)):n=e.offsetWidth,n},height:function(t){var e,n,i,s=0;if(t&&"number"==typeof t){for(;null!=(e=this[s]);s++)1===e.nodeType&&(e.style.height=t+"px");return this}return e=this[0],m.isWindow(e)?n=e.document.documentElement.clientHeight:9===e.nodeType?(i=e.documentElement,n=Math.max(e.body.scrollHeight,i.scrollHeight,e.body.offsetHeight,i.offsetHeight,i.clientHeight)):n=e.offsetHeight,n},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(t.textContent="");return this},remove:function(){for(var t,e=0;null!=(t=this[e]);e++)t.parentNode&&t.parentNode.removeChild(t);return this},append:function(){for(var t,e=0,n=m.parseDom(arguments[0]);null!=(t=this[e]);e++)1!==t.nodeType&&11!==t.nodeType&&9!==t.nodeType||t.appendChild(n.cloneNode(!0));return this},prepend:function(){for(var t,e=0,n=m.parseDom(arguments[0]);null!=(t=this[e]);e++)1!==t.nodeType&&11!==t.nodeType&&9!==t.nodeType||t.insertBefore(n.cloneNode(!0),t.firstChild);return this},before:function(){for(var t,e=0,n=m.parseDom(arguments[0]);null!=(t=this[e]);e++)t.parentNode&&t.parentNode.insertBefore(n.cloneNode(!0),t);return this},after:function(){for(var t,e=0,n=m.parseDom(arguments[0]);null!=(t=this[e]);e++)t.parentNode&&t.parentNode.insertBefore(n.cloneNode(!0),t.nextSibling);return this}};var _=m.fn.init=function(t,n){var i,n=n||document;if(!t)return this;if("string"==typeof t){t=m.trim(t),i=document.querySelectorAll?n.querySelectorAll(t):e(t,n);for(var s=0;s<i.length;s++)this[s]=i[s];this.length=i.length}else(t.nodeType||t.window)&&(this[0]=t,this.length=1);return this.context=n,this.selector=t,this};_.prototype=m.fn;var S=/^#(\S+)/,B=/^\.(\S+)/,P=/\[(\S+)=(\S+)\]$/;m.extend=m.fn.extend=function(){var t,e,n,i=arguments[0]||{},s=1,o=arguments.length;for(s===o&&(i=this,s--);s<o;s++)if(null!=(t=arguments[s]))for(e in t)n=t[e],i!==n&&void 0!==n&&(i[e]=n);return i},m.extend({expando:"tool"+(g+Math.random()).replace(/\D/g,""),isArray:b,isWindow:function(t){return null!=t&&t===t.window},contains:function(t,e){return t!==document||document.contains||(t=document.documentElement||document.body),t.contains(e)},trim:function(t){return null==t?"":(t+"").replace(C,"")},parseDom:function(t){var e,n,i,s=document.createDocumentFragment(),o=0,a=[];if("string"==typeof t){for(e=document.createElement("div"),e.innerHTML=t,i=e.childNodes,n=i.length;o<n;++o)a.push(i[o]);for(o=0;o<n;o++)s.appendChild(a[o])}else if("object"==typeof t&&t.nodeType)s.appendChild(t);else if(t instanceof m)for(o=0;o<t.length;o++)s.appendChild(t[o]);else m.log("\u4f20\u9012\u7684\u53c2\u6570\u975e\u6cd5!");return s},each:function(t,e){var n,i=0,o=t.length,a=s(t);if(a)for(;i<o&&(n=e.call(t[i],i,t[i]),n!==!1);i++);else for(i in t)if(n=e.call(t[i],i,t[i]),n===!1)break},map:function(t,e){var n,i=0,o=t.length,a=s(t),r=[];if(a)for(;i<o;i++)n=e(t[i],i),null!=n&&r.push(n);else for(i in t)n=e(t[i],i),null!=n&&r.push(n);return T.apply([],r)},proxy:function(t,e){var n,i;return n=w.call(arguments,2),i=function(){return t.apply(e||this,n.concat(w.call(arguments)))}},merge:function(t,e){for(var n=+e.length,i=0,s=t.length;i<n;i++)t[s++]=e[i];return t.length=s,t},unique:function(t){if(document.documentElement.compareDocumentPosition){var e=function(t,e){return t===e?0:t.compareDocumentPosition&&e.compareDocumentPosition?4&t.compareDocumentPosition(e)?-1:1:t.compareDocumentPosition?-1:1};t.sort(e);for(var n=1;n<t.length;n++)t[n]===t[n-1]&&t.splice(n--,1)}return t},dir:function(t,e,n){for(var i=[],s=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(s)break;i.push(t)}return i},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},now:Date.now?Date.now:function(){return(new Date).getTime()}}),m.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return m.dir(t,"parentNode")},children:function(t){return m.sibling(t.firstChild)},siblings:function(t){return m.sibling((t.parentNode||{}).firstChild,t)},next:function(t){return o(t,"nextSibling")},prev:function(t){return o(t,"previousSibling")}},function(t,e){m.fn[t]=function(){var t=m.map(this,e);return this.length>1&&m.unique(t),this.pushStack(t)}}),m.fn.extend({parentToLevel:function(t){var e=t||1,n=0,i=m.map(this,function(t){for(var i=t;(i=i.parentNode)&&11!==i.nodeType&&++n<e;);return i});return this.length>1&&m.unique(i),this.pushStack(i)},child:function(t){return this.children().eq(t)}});var L={focus:{delegateType:"focusin"},blur:{delegateType:"focusout"}};m.event={add:function(t,e,n,i){var o=t.events||[],i=i||t;i=s(i)?i:[i],o.push({type:e,target:i,handler:n}),t.events=o,t.events[e]||(l(t,e,function(n){var i,n=c(n);m.each(t.events,function(s,o){var r,l;o.type===e&&(i=o.target,m.each(i,function(e,i){"string"==typeof i&&(r=m(i,t),l=a(r,n.target),l&&o.handler.call(l,n)),"object"==typeof i&&m.contains(i,n.target)&&o.handler.call(i,n)}))})},!r(e)),t.events[e]=!0)},del:function(t,e,n,i){var s=arguments,o=t.events;o&&o.length>0&&(o=1===s.length?[]:2===s.length?m.map(o,function(t){return t.type===e?null:t}):3===s.length?m.map(o,function(t){return t.type===e&&t.handler===n?null:t}):m.map(o,function(t){var s=t;return t.type===e&&t.handler===n&&i&&(s.target=m.map(t.target,function(t){var e=!1;for(var n in i)if(i[n]===t){e=!0;break}return e?null:t})),s})),t.events=o},trigger:function(t,e){}},m.fn.extend({on:function(t,e,n){var i,s=arguments;return m.each(this,function(o,a){2===s.length?(i=s[1],m.event.add(a,t,i)):(i=n,m.event.add(a,t,i,[e]))}),this},off:function(t,e,n){var i,s=arguments;return m.each(this,function(o,a){var r;0===s.length?m.event.del(a):1===s.length?m.event.del(a,t):2===s.length?(i=s[1],m.event.del(a,t,i)):(i=n,r=m(e,a),r=0===r.length?[e]:r,m.event.del(a,t,i,m(e)))}),this},trigger:function(t){m.each(this,function(e,n){m.event.trigger(n,t)})},bind:function(t,e){m.each(this,function(n,i){l(i,t,e,!r(t))})}});var j=m.now(),A=/\?/,N=document.head||document.getElementsByTagName("head")[0],E=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,D=E.exec(location.href.toLowerCase())||[],U={url:"",type:"GET",async:!0,data:null,dataType:"text",jsonp:"callback",contentType:"application/x-www-form-urlencoded; charset=UTF-8",timeout:0,scriptCharset:"UTF-8",crossDomain:null,supportCORS:"withCredentials"in new XMLHttpRequest,removeIframe:!0};m.extend({serialize:function(t){var e=[];for(var n in t){var i=t[n];if(i.constructor==Array)for(var s=0,o=i.length;s<o;s++)e.push(n+"="+encodeURIComponent(i[s]));else e.push(n+"="+encodeURIComponent(i))}return e.join("&")},getData:function(t,e,n){var t=m.extend({},U,t);t.type=t.type.toUpperCase(),null===t.crossDomain&&(t.crossDomain=f(t.url)),t.crossDomain?("GET"===t.type&&u(t,e),"POST"===t.type&&(t.supportCORS?d(t,e,n):h(t,e))):d(t,e,n)},getFormData:function(t){var e,n,i,s,o=t.find("input, textarea"),a={},r=[];if(0===o.length){for(i=t[0].getElementsByTagName("input"),s=t[0].getElementsByTagName("textarea"),e=0,n=i.length;e<n;e++)r.push(i[e]);for(e=0,n=s.length;e<n;e++)r.push(s[e]);o=r}return m.each(o,function(t,e){e=m(e),("checkbox"!==e.attr("type")||"checkbox"===e.attr("type")&&e.attr("checked"))&&(a[e.attr("name")]=e.val())}),a},parseJSON:function(t){return JSON.parse(t)},stringify:function(t){return JSON.stringify(t)},loadCSS:function(t){var e=document.createElement("link");e.rel="stylesheet",e.type="text/css",e.href=t,N.appendChild(e)}}),Tie.tool=m}(),function(t){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";t.extend({log:function(t){"undefined"!=typeof console&&console.log&&console.log(t)},render:function(t,e){t=t||"",e=e||[""];for(var n,i=/<%((?:(?!%>).)+)?%>/g,s=/(^( )?(if|for|else|switch|case|break|{|}))(.*)?/g,o="var r=[];\n",a=0,r=function(t,e){return o+=e?t.match(s)?t+"\n":"r.push("+t+");\n":""!=t?'r.push("'+t.replace(/"/g,'\\"')+'");\n':"",r};n=i.exec(t);)r(t.slice(a,n.index))(n[1],!0),a=n.index+n[0].length;r(t.substr(a,t.length-a)),o+='return r.join("");',e=isNaN(e.length)?[e]:e;for(var l="",c=0,p=e.length;c<p;c++)l+=new Function(o.replace(/[\r\t\n]/g,"")).apply(e[c]);return l},cookie:{EXPIRESWITHUNIT:/[smhdMy]$/,TIMEUNITS:{s:1,m:60,h:3600,d:86400,M:2592e3,y:31536e3},encoder:window.encodeURIComponent,decoder:window.decodeURIComponent,get:function(t,e){var n=this;t=n.encoder(t)+"=";var i,s=document.cookie,o=s.indexOf(t);return-1===o?e?void 0:"":(o+=t.length,i=s.indexOf(";",o),i===-1&&(i=s.length),n.decoder(s.substring(o,i)))},set:function(t,e,n,i,s,o){var a=this,r=[a.encoder(t)+"="+a.encoder(e)];if(n){var l,c;n instanceof Date?l=n:("string"==typeof n&&this.EXPIRESWITHUNIT.test(n)&&(n=n.substring(0,n.length-1),c=RegExp.lastMatch),isNaN(n)||(l=new Date,l.setTime(l.getTime()+n*this.TIMEUNITS[c||"m"]*1e3))),l&&r.push("expires="+l.toUTCString())}s&&r.push("path="+s),i&&r.push("domain="+i),o&&r.push("secure"),document.cookie=r.join(";")},del:function(t,e,n){document.cookie=this.encoder(t)+"="+(n?";path="+n:"")+(e?";domain="+e:"")+";expires=Thu, 01-Jan-1970 00:00:01 GMT"}},formatDate:function(t,e){var e=e||"yyyy-MM-dd hh:mm:ss",t=t||new Date;return Date.prototype.formatDt=Date.prototype.formatDt||function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in e)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[n]:("00"+e[n]).substr((""+e[n]).length)));return t},t.formatDt(e)},subChineseStr:function(t,e,n){e=2*e;for(var i="",s=0,o=0;o<t.length;o++){if(t.charCodeAt(o)>255?s+=2:s++,s>=e)return n?i+"...":i;i+=t.charAt(o)}return t},scrollY:function(t,e){var e=e||0;window.scrollTo(0,t.position().top+e)},base64Encode:function(t){var n,i,s,o,a,r;for(s=t.length,i=0,n="";i<s;){if(o=255&t.charCodeAt(i++),i==s){n+=e.charAt(o>>2),n+=e.charAt((3&o)<<4),n+="==";break}if(a=t.charCodeAt(i++),i==s){n+=e.charAt(o>>2),n+=e.charAt((3&o)<<4|(240&a)>>4),n+=e.charAt((15&a)<<2),n+="=";break}r=t.charCodeAt(i++),n+=e.charAt(o>>2),n+=e.charAt((3&o)<<4|(240&a)>>4),n+=e.charAt((15&a)<<2|(192&r)>>6),n+=e.charAt(63&r)}return n}})}(Tie.tool);var Tie=window.Tie||{};Tie.setting={oprtBtnTxt:{up:"\u9876",down:"\u8e29",reply:"\u56de\u590d",fav:"\u6536\u85cf",cancelFav:"\u53d6\u6d88\u6536\u85cf",inform:"\u4e3e\u62a5",share:"\u5206\u4eab"},sbmtBtnTxt:{imPub:"\u9a6c\u4e0a\u53d1\u8868",lgnPub:"\u767b\u5f55\u5e76\u53d1\u8868"},userTxt:{exit:"\u9000\u51fa",regist:"\u6ce8\u518c",autoLogin:"\u81ea\u52a8\u767b\u5f55",account:"\u8d26\u53f7",password:"\u5bc6\u7801"},myTieTxt:"\u6211\u7684\u8ddf\u8d34",disciplineTxt:"\u8ddf\u8d34\u7528\u6237\u81ea\u5f8b\u516c\u7ea6&gt;&gt;",pubTipTxt:"\u6587\u660e\u4e0a\u7f51\uff0c\u767b\u5f55\u53d1\u8d34",emptyTipTxt:{hotList:"\u76ee\u524d\u6ca1\u6709\u70ed\u95e8\u8ddf\u8d34",newList:"\u76ee\u524d\u6ca1\u6709\u8ddf\u8d34\uff0c\u6b22\u8fce\u4f60\u53d1\u8868\u89c2\u70b9"},barTxt:{hotList:"\u70ed\u95e8\u8ddf\u8d34",newList:"\u6700\u65b0\u8ddf\u8d34"},showAllTxt:"\u67e5\u770b\u66f4\u591a\u8ddf\u8d34",noTieTxt:"\u53bb\u8ddf\u8d34\u5e7f\u573a\u770b\u770b",lawTxt:"\u7f51\u53cb\u8bc4\u8bba\u4ec5\u4f9b\u5176\u8868\u8fbe\u4e2a\u4eba\u770b\u6cd5\uff0c\u5e76\u4e0d\u8868\u660e\u7f51\u6613\u7acb\u573a\u3002",esyFrmTxt:"\u6765\u81ea\uff1a",pubSucsTxt:"\u8ddf\u8d34\u53d1\u5e03\u6210\u529f",auditTxt:"\u60a8\u7684\u8ddf\u8d34\u6b63\u5728\u5ba1\u6838\u4e2d...",wrapperId:"tieArea",listCls:"tie-list",emptyTipCls:"empty-tip",oprtBtnCls:{up:"up-btn",down:"down-btn",reply:"reply-btn",fav:"fav-btn",cancelFav:"cancel-fav-btn",inform:"inform-btn",share:"share-btn"},floorCls:{trunk:"single-tie",quote:"floor-tie",middle:"hide-middle-posts",oprtBar:"m-tool",toolBar:"tool-bar",arrow:"arrow"},barCls:{input:"tie-input-bar",page:"tie-page",reminder:"tie-reminder"},pageCls:{actionBtn:"page-btn",numBtn:"page-num"},barId:{hotList:"hot-posts",newList:"new-posts",shareWin:"shareListWin",noneTie:"no-tie"},eventCls:{submitBtn:"js-submit-btn",inputBar:"js-input-bar",acntInput:"js-acnt-input",pwdInput:"js-pwd-input",acntEmpty:"js-acnt-empty",pwdEmpty:"js-pwd-empty"},userCls:{exit:"js-tie-logout"},showAllCls:"show-all-tie",stateCls:{active:"z-active",visited:"z-visited",parallelFlr:" z-parallel-floor",firstFlr:" z-first-floor",visible:"z-visible",visibleShare:"z-visible-share",onlyOne:"z-only-one",onlyShowInputBox:"z-only-input",readMode:"z-read-mode",writeMode:"z-write-mode",checkAcnt:"z-check-account",checkPwd:"z-check-password",inputFold:"z-input-fold"},formCls:{cntTip:"js-tie-tips",submitBtn:"post-btn",parentPostIdInpt:"js-tie-parent-id",userBox:"js-username",pwdBox:"js-password",cntBox:"js-cnt-box",pidBox:"js-pid-box"},dataAtr:{postId:"data-post-id",postUp:"data-post-up",postDown:"data-post-down",page:{prev:"data-page-prev",next:"data-page-next",num:"data-page-num"}},statistic:{postSubmit:"GTnews_postArea_post",replySubmit:"GTnews_tieArea_post",loginSubmit:"GTnews_tieReply_submit"},baseDataURL:"http://sdk.comment.163.com/api/v1/products/<% this.productKey %>",defaultUserTitleLink:"http://tie.163.com/gt/14/0226/12/9M0QKRDU00304IK1.html",callback:{beforeSubmitPost:function(t){var e=!1,n=Tie.tool,i=n.trim(t.content);return i.length<=0?alert("\u8bf7\u586b\u5199\u5185\u5bb9"):i.length<2?alert("\u5185\u5bb9\u592a\u77ed\uff0c\u81f3\u5c112\u4e2a\u6587\u5b57"):i.length>1e3?alert("\u5185\u5bb9\u592a\u957f\uff0c\u6700\u591a1000\u4e2a\u6587\u5b57"):e=!0,e}},cookie:{toCommentPage:"toMain",newTieId:"my_comment_<% Tie.global.threadInfo.docId %>",domain:".163.com"},specChannels:{"h.163.com":"play.163.com","d.163.com":"play.163.com","s.163.com":"play.163.com","a.163.com":"play.163.com","w.163.com":"play.163.com","gg.163.com":"play.163.com","fashion.163.com":"lady.163.com","discovery.163.com":"news.163.com","henan.163.com":"news.163.com"},defaultConfig:{productKey:"a2869674571f77b5a0867c3d71db5856",ADconfig:!1,event:"beforeShow/afterShow",skinPath:"../skin/",skin:"default",type:"build",nestedHierarchy:20,startHideMdl:7,mods:["hotView","newView"],operators:["up","down","reply","fav","inform","share"],hotSize:10,newSize:30,submitType:"currentPage"}};var Tie=window.Tie||{};!function(){var t=['<div class="photo">',"<% if (this.nickname) { %>",'<a href="http://tie.163.com/reply/myaction.jsp?action=reply&username=<% this.userId %>&userId=<% this.userNId %>&f=gentieavatar" class="photo-link" target="_blank" statistic="GTnews_tieArea_avatar">',"<% if (this.photo) { %>",'<img src="<% this.photo %>">',"<% } else { %>",'<div class="default-photo"></div>',"<% } %>","</a>","<% } else { %>",'<div class="default-photo"></div>',"<% } %>","<% if (this.authInfo) { %>",'<a class="bv-icon" statistic="vdetail_nickname"></a>',"<% } %>","</div>"].join(""),e=['<% if (this.type === "quote") { %>',"<% if ( this.title ) { %>",'<a class="name" href="http://tie.163.com/reply/myaction.jsp?action=reply&username=<% this.userId %>&userId=<% this.userNId %>&f=gentienickname" target="_blank" statistic="GTnews_tieArea_nickname"><% this.nickname %></a>',"<% if (this.authInfo) { %>",'<a class="bv-icon" title="\u70b9\u51fb\u8fdb\u5165\u8ba4\u8bc1\u7528\u6237\u4ecb\u7ecd\u9875" href="http://tie.163.com/reply/vintro.html" target="_blank" statistic="vdetail_nickname"></a>',"<% } %>",'<a href="<% this.titleURL %>" class="name-title" target="_blank" statistic="GTnews_redName">[<% this.title %>]</a>',"<% }  else if (this.anonymous) { %>",'<span class="flr-site"><% this.siteName %><% this.from %><% ( this.source === "ph" ? "\u624b\u673a" : "" ) %>\u7f51\u53cb</span><span class="flr-ip">(<% this.ip %>)</span>',"<% } else { %>",'<a class="name" href="http://tie.163.com/reply/myaction.jsp?action=reply&username=<% this.userId %>&userId=<% this.userNId %>&f=gentienickname" target="_blank" statistic="GTnews_authNickname"><% this.nickname %></a>',"<% if (this.authInfo) { %>",'<a class="bv-icon" title="\u70b9\u51fb\u8fdb\u5165\u8ba4\u8bc1\u7528\u6237\u4ecb\u7ecd\u9875" href="http://tie.163.com/reply/vintro.html" target="_blank" statistic="vdetail_nickname"></a>',"<% } %>",'<span class="flr-site">[<% this.siteName %><% this.from %><% ( this.source === "ph" ? "\u624b\u673a" : "" ) %>\u7f51\u53cb]</span>',"<% } %>","<% } %>",'<% if (this.type === "trunk") { %>',"<% if ( this.title ) { %>",'<a class="name" href="http://tie.163.com/reply/myaction.jsp?action=reply&username=<% this.userId %>&userId=<% this.userNId %>&f=gentienickname" target="_blank" statistic=""><% this.nickname %></a>','<a href="<% this.titleURL %>" class="name-title" target="_blank" statistic="GTnews_tieArea_redName">[<% this.title %>]</a>',"<% }  else if (this.anonymous) { %>",'<span class="name-desp"><% this.siteName %><% this.from %><% ( this.source === "ph" ? "\u624b\u673a" : "" ) %>\u7f51\u53cb</span><span class="name-ip">ip:<% this.ip %></span>',"<% } else { %>",'<a class="name" href="http://tie.163.com/reply/myaction.jsp?action=reply&username=<% this.userId %>&userId=<% this.userNId %>&f=gentienickname" target="_blank" statistic="GTnews_authNickname"><% this.nickname %></a>','<span class="name-desp">[<% this.siteName %><% this.from %><% ( this.source === "ph" ? "\u624b\u673a" : "" ) %>\u7f51\u53cb]</span>',"<% } %>","<% } %>"].join(""),n=['<p class="tie-cnt">',"<% this.cnt %>","</p>"].join(""),i=["<% if (this.voice && Tie.tpl.util.audioEnable) { %>",'<div class="tie-voice">','<em class="icon icon-voice" statis="GTtie_voice"></em>','<audio src="" val="<% this.voice.url %>"></audio>',"<span class=\"voice-length\"><% this.voice.time %>''</span>","</div>","<% } %>"].join(""),s='<div style="clear:both"></div>',o=["<% if (this.essayURL) { %>",'<div class="tie-from"><% Tie.setting.esyFrmTxt %>','<a href="<% this.essayURL %>" class="from-link" target="_blank" title="<% this.essayTitle %>" statis="GTtie_relatedPost">',"<% (Tie.tpl.util.narrowScreen) ? Tie.tpl.util.longStr(this.essayTitle, 8) : this.essayTitle %>","</a>","</div>","<% } %>"].join(""),a=['<div class="<% Tie.setting.floorCls.toolBar %> <% this.auditStatus ? "z-audit" : "" %>">','<ul class="<% Tie.setting.floorCls.oprtBar %>" data-post-id="<% this.id %>" data-post-order="<% this.order %>">','<% if (Tie.tpl.util.isShowOprator("up")) { %>',"<li>",'<span class="add-one">+1</span>','<a href="javascript:void(0);" class="tie-operate operate-top <% Tie.setting.oprtBtnCls.up %>" target="_self"><% Tie.setting.oprtBtnTxt.up %><span class="u-num" data-post-up="<% this.up %>"><% this.up %></span></a>',"</li>","<% } %>",'<% if (Tie.tpl.util.isShowOprator("down")) { %>',"<li>","<i>|</i>",'<span class="del-one">+1</span>','<a href="javascript:void(0)" class="tie-operate operate-down <% Tie.setting.oprtBtnCls.down %>" target="_self"><% Tie.setting.oprtBtnTxt.down %><span class="u-num" data-post-down="<% this.down %>"><% this.down %></span></a>',"</li>","<% } %>",'<% if (Tie.tpl.util.isShowOprator("reply")) { %>',"<li>","<i>|</i>",'<a href="javascript:void(0)" class="tie-operate <% Tie.setting.oprtBtnCls.reply %>" statistic="GTnews_tieArea_reply" target="_self"><% Tie.setting.oprtBtnTxt.reply %></a>','<div class="arrow" style="display:none;">','<span class="arrow-top"></span>','<span class="arrow-btm"></span>',"</div>","</li>","<% } %>",'<% if (Tie.tpl.util.isShowOprator("fav") && Tie.global.user) { %>','<li><i>|</i><a href="javascript:void(0)" class="tie-operate <% Tie.setting.oprtBtnCls.fav %>" statis="GTtie_star" target="_self"><% Tie.setting.oprtBtnTxt.fav %></a></li>',"<% } %>",'<% if (Tie.tpl.util.isShowOprator("inform")) { %>','<li><i>|</i><a href="javascript:void(0)" class="tie-operate <% Tie.setting.oprtBtnCls.inform %>" statis="GTtie_star" target="_self"><% Tie.setting.oprtBtnTxt.inform %></a></li>',"<% } %>",'<% if (Tie.tpl.util.isShowOprator("share") && this.type === "trunk") { %>','<li><i>|</i><a href="javascript:void(0)" class="tie-operate <% Tie.setting.oprtBtnCls.share %>" statistic="GTnews_tieArea_share" target="_self"><% Tie.setting.oprtBtnTxt.share %></a></li>',"<% } %>","</ul>",s,"</div>"].join(""),r=['<div class="tool-bar-i">','<span class="publis-success"><em class="icon icon-pub-suc"></em><% Tie.setting.pubSucsTxt %></span>','<a class="enter-my-tie" href="http://tie.163.com/reply/myaction.jsp?action=reply" target="_blank"><% Tie.setting.myTieTxt %><em class="icon icon-enter-i"></em></a>',"</div>"].join(""),l=['<form method="post" action="https://reg.163.com/logins.jsp" target="tie_util_frame">','<input type="text" class="account-input <% Tie.setting.formCls.userBox %> <% Tie.setting.eventCls.acntInput %>" name="username" placeholder="<% Tie.tpl.util.isIE() ? "" : "\u5e10\u53f7" %>">',"<% if ( Tie.tpl.util.isIE() ) { %>",'<span class="account-empty-tip <% Tie.setting.eventCls.acntEmpty %>">\u5e10\u53f7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>',"<% } %>",'<input type="password" class="password-input <% Tie.setting.formCls.pwdBox %> <% Tie.setting.eventCls.pwdInput %>" name="password" placeholder="<% Tie.tpl.util.isIE() ? "" : "\u5bc6\u7801" %>">',"<% if ( Tie.tpl.util.isIE() ) { %>",'<span class="password-empty-tip <% Tie.setting.eventCls.pwdEmpty %>">\u5bc6\u7801&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>',"<% } %>",'<input type="hidden" name="product" value="content">','<input type="hidden" name="url" value="http://www.163.com/special/0077450P/login_frame.html">','<input type="hidden" name="url2" value="http://www.163.com/special/0077450P/login_frame.html">','<input type="hidden" name="noRedirect" value="1">','<input type="hidden" name="savelogin" value="1">',"</form>",'<div class="links-area z-unlogin">','<a href="http://reg.163.com/reg0.shtml?product=tie&url=<% encodeURI(document.location.href) %>" target="_blank" statistic="GTnews_postArea_register">\u6ce8\u518c</a>','<em class="link-split">|</em>','<a href="http://tie.163.com/" target="_blank" statistic="GTnews_postArea_plaza">\u8ddf\u8d34\u5e7f\u573a</a>','<em class="link-split">|</em>','<a href="http://m.163.com/newsapp/" target="_blank" statistic="GTnews_postArea_wordsLink">\u624b\u673a\u53d1\u8ddf\u8d34</a>',"</div>",'<div class="submit-btn <% Tie.setting.eventCls.submitBtn %>">\u767b\u5f55\u5e76\u53d1\u8d34</div>'].join(""),c=['<div class="photo-area">',"<% if ( Tie.global.user.avatar ) { %>",'<img src="<% Tie.global.user.avatar %>" alt="\u5934\u50cf" class="avatar">',"<% } else { %>",'<span class="dflt-avatar"></span>',"<% } %>",'<span class="nickname"><% Tie.tool.subChineseStr(Tie.global.user.nickname, 5, true) %></span>',"</div>",'<div class="links-area">','<a href="http://tie.163.com/reply/myaction.jsp?f=articles&action=reply" target="_blank" statistic="GTnews_postArea_myTie">\u6211\u7684\u8ddf\u8d34</a>','<em class="link-split">|</em>','<a href="http://tie.163.com/?f=articles" target="_blank" statistic="GTnews_postArea_plaza">\u8ddf\u8d34\u5e7f\u573a</a>','<em class="link-split phone-send">|</em>','<a href="http://m.163.com/newsapp/" class="phone-send" target="_blank" statistic="GTnews_postArea_wordsLink">\u624b\u673a\u53d1\u8ddf\u8d34</a>','<em class="link-split">|</em>','<a href="http://reg.163.com/Logout.jsp?username=<% Tie.global.user.userId %>&url=<% encodeURI(document.location.href) %>" target="_self" statistic="GTnews_postArea_logout">\u9000\u51fa</a>',"</div>",'<div class="submit-btn <% Tie.setting.eventCls.submitBtn %>">\u9a6c\u4e0a\u53d1\u8868</div>'].join(""),p=['<div class="tie-hot" id="<% Tie.setting.barId.hotList %>">','<div class="<% Tie.setting.listCls %>"></div>','<div class="empty-tip">','<p class="tip-cnt">',"<span><% Tie.setting.emptyTipTxt.hotList %></span>","</p>","</div>","</div>"].join(""),d=['<div class="tie-newest" id="<% Tie.setting.barId.newList %>">','<div class="<% Tie.setting.listCls %>"></div>','<div class="empty-tip">','<p class="tip-cnt"><% Tie.setting.emptyTipTxt.newList %></p>',"</div>","<% if ( !Tie.global.config.showPaging ) { %>",'<a href="<% Tie.global.threadInfo.commentPageURL %>" class="show-all-tie" target="_blank" statistic="GTnews_tieArea_more"><span class="icon i-more"></span><span><% Tie.setting.showAllTxt %></span></a>',"<% } %>","</div>"].join(""),u=['<a href="http://tie.163.com/?f=0tie" class="show-all-tie" target="_blank" statistic="GTnews_tieArea_noTiePlaza" id="no-tie"><span class="icon i-more"></span><span><% Tie.setting.noTieTxt%></span></a>'].join(""),h={
readMode:['<div class="tie-input-bar z-read-mode <% Tie.setting.eventCls.inputBar %>">','<div class="input-tip">\u6587\u660e\u4e0a\u7f51\uff0c\u767b\u5f55\u53d1\u8d34</div>','<div class="input-btn">','<span class="icon i-write-tie"></span>','<span class="btn-txt"><% Tie.global.user ? "\u9a6c\u4e0a\u53d1\u8868" : "\u767b\u5f55\u5e76\u53d1\u8d34" %></span>',"</div>","</div>"].join(""),writeMode:['<div class="tie-input-bar z-write-mode <% Tie.setting.eventCls.inputBar %> <% Tie.setting.stateCls.inputFold %>">',"<form>",'<textarea name="content" class="<% Tie.setting.formCls.cntBox %>"><% this.content %></textarea>','<input type="hidden" name="parentId" value="<% this.parentId %>" class="<% Tie.setting.formCls.pidBox %>">',"</form>",'<div class="submit-row">',"<% if ( Tie.global.user ) { %>",c,"<% } else { %>",l,"<% } %>","</div>",'<div class="icon i-check-tip"></div>',"</div>"].join("")},f='<p class="tie-reminder"><% Tie.setting.lawTxt %></p>',m=[].join(""),g='<div class="icon i-hot-border"></div>';Tie.tpl={layout:['<div id="<% Tie.setting.wrapperId %>" class="tie-area">',m,h.writeMode,f,p,d,u,"</div>"].join(""),inputBar:h,noticeBar:f,pagingPart:["<% if ( this.total > 0 ) { %>",'<div class="tie-page">','<a href="#" class="page-btn" data-page-prev="prev">&lt;\u4e0a\u4e00\u9875</a>',"<% for ( var numArry = Tie.tpl.util.calPageNum(3), i = 0, len = numArry.length; i < len; i++ ) { %>","<% if ( (i === 1 && numArry[i] > 2) || (i === len-1 && numArry[i-1] < this.total-1) ) { %>",'<span class="page-dot">...</span>',"<% } %>","<% if ( numArry[i] === this.current ) { %>",'<a href="javascript:void(0)" class="page-num z-current"><% numArry[i] %></a>',"<% } else { %>",'<a href="javascript:void(0)" class="page-num" data-page-num="<% numArry[i] %>"><% numArry[i] %></a>',"<% } %>","<% } %>",'<a href="#" class="page-btn" data-page-next="next">\u4e0b\u4e00\u9875&gt;</a>',"</div>","<% } %>"].join(""),trunkPost:{upperPart:['<div class="<% Tie.setting.floorCls.trunk %> <% if (this.order === 1) { %><% Tie.setting.stateCls.onlyOne %><% } %>" data-post-id="<% this.id %>">',t,'<div class="tie-bdy">','<div class="bdy-inner">','<div class="tie-author">',e,'<span class="tie-time"><% this.pubTime %></span>',"</div>","<% if (this.auditStatus) { %>",'<p class="tie-checking"><% Tie.setting.auditTxt %></p>',"<% }; %>"].join(""),lowerPart:[n,i,"<% if (this.fresh) { %>",r,"<% } else { %>",o,a,"<% } %>","</div>","</div>",g,"</div>"].join("")},floorPost:{upperPart:'<div class="floor-tie<% Tie.tpl.util.parallelFloorCls(this.order, this.groupMemberSize) %>">',lowerPart:['<div class="floor-tie-self<% Tie.tpl.util.firstFloorCls(this.order) %>">','<div class="tie-author">','<span class="name-desp">',e,"</span>",'<span class="floor-NO"><% this.order %></span>',"</div>",n,i,a,"</div>","</div>"].join(""),middlePart:['<div class="floor-tie-self">','<div class="hide-middle-posts" data-trunk-id="<% this.trunkPstId %>">','<a href="javascript:void(0)" class="hide-posts-text" statistic="GTnews_tieArea_tieExpand">','<span class="hide-flr-num">\u5df2\u7ecf\u9690\u85cf<% this.hideMdlNum %>\u5c42\u91cd\u590d\u76d6\u697c</span>','<span class="expend-txt">[\u70b9\u51fb\u5c55\u5f00]</span>',"</a>","</div>","</div>","</div>"].join("")},util:{audioEnable:!1,longStr:function(t,e){return Tie.tool.subChineseStr(t,e,!0)},parallelFloorCls:function(t,e){var n=e-1,i=Math.round(Tie.global.config.nestedHierarchy/2),s="";return t<i||t>n-i||(s=Tie.setting.stateCls.parallelFlr),s},firstFloorCls:function(t){return 1===t?Tie.setting.stateCls.firstFlr:""},isShowOprator:function(t){t=t.toLowerCase();var e=Tie.global.config.operators.join(", ").toLowerCase();return"down"===t?"on"===Tie.global.threadInfo.status.against&&e.indexOf(t)>-1:e.indexOf(t)>-1},calPageNum:function(t){var e=[1],n=Tie.global.page.total,i=Tie.global.page.current,s=i-t,o=i+t;s<2&&(o+=Math.abs(s-2),s=2),o>n-1&&(s-=Math.abs(o-(n-1)),o=n-1),s<2&&(s=2),o>n-1&&(o=n-1);for(var a=s;a<=o;a++)e.push(a);return n>1&&e.push(n),e},isIE:function(t){var e=navigator.userAgent;return e.indexOf("MSIE")>=0&&e.indexOf("Opera")<0}}}}(),function(t){function e(t,e){var n,i=e.boardId+"/"+e.threadId+"/"+e.oldId+".html",s="http://"+t.commentPageHost+"/"+i,o="http://comment.3g.163.com/"+i,a=e.cnt,r=t.title,l={};return r=r.replace(/<[^>]+>/g,"").replace(/"/g,"\u201c"),a=a.replace(/<[^>]+>/g,"").replace(/"/g,"\u201c"),n=a,r.length>32&&(r=r.substr(0,16)+"..."),a.length>32&&(a=a.substr(0,32)+"..."),n.length>16&&(n=n.substr(0,16)+"..."),l.url=s,l.title=encodeURIComponent("\u300e"+n+"\u300f-- \u6765\u81ea\u7f51\u6613\u65b0\u95fb\u300a"+r+"\u300b@\u7f51\u6613\u8ddf\u8d34\u9891\u9053"),l.digest=encodeURIComponent(a),l.otitle=encodeURIComponent(r),l.url3g=o,l}function n(t,e,n){r.getData({url:r.render(s,r.extend({},t,e)),jsonp:"jsoncallback"},n)}var i,s="http://<% this.commentPageHost %>/reply/api/showWebShortUrl.jsp?url=http://<% this.commentPageHost %>/<% this.boardId %>/<% this.threadId %>/<% this.oldId %>.html",o=[{id:"weibo",name:"\u65b0\u6d6a\u5fae\u535a",url:"http://v.t.sina.com.cn/share/share.php?appkey=1755601839&title=<% this.title %>&url=<% this.url %>%23sns_weibo&pic=<% this.image %>&searchPic=false&source="+encodeURIComponent("\u7f51\u6613\u8ddf\u8d34")+"sourceUrlhttp://tie.163.com/plaza/recommend.html",statistic:"GTnews_tieArea_shareWeibo"},{id:"qzone",name:"QQ\u7a7a\u95f4",url:"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=<% this.url %>%23sns_qzone&title=<% this.title %>&pics=<% this.image %>&summary=<% this.digest %>",statistic:"GTnews_tieArea_shareQzone"},{id:"yixin",name:"\u6613\u4fe1",url:"https://open.yixin.im/share?appkey=yxb7d5da84ca9642ab97d73cd6301664ad&type=image&title=<% this.otitle %>&pic=<% this.image %>&desc=<% this.digest %>&url=<% this.image %>%23sns_yixin",statistic:"GTnews_tieArea_shareYixin"}],a=['<div id="shareListWin" class="shareListWin">',"<% for (var i = 0, l = Tie.share.types.length; i < l; i++) { %>",'<a href="" class="shareSnsBtn <% Tie.share.types[i].id %>" target="_blank" data-share="<% Tie.share.types[i].id %>" statistic="<% Tie.share.types[i].statistic %>">&nbsp;</a>',"<% } %>",'<div class="arrow"><span class="arrow-top"></span><span class="arrow-btm"></span></div>',"</div>"].join(""),r=t.tool,l=t.setting;t.share={types:o,template:a,show:function(s,c,p){var d=p.position();i||(r(document.body).append(r.render(a)),i=r("#shareListWin"),r(".shareSnsBtn.weibo").on("click",function(e){t.operator.actionStatistic("GTnews_tieArea_shareWeibo")}),r(".shareSnsBtn.qzone").on("click",function(e){t.operator.actionStatistic("GTnews_tieArea_shareQzone")}),r(".shareSnsBtn.yixin").on("click",function(e){t.operator.actionStatistic("GTnews_tieArea_shareYixin")})),n(s,c,function(t){var n;t.code&&t.url&&(n=e(s,c),n.image=t.url,r.each(i.children(),function(t,e){var i=r(e).attr("data-share");i&&r(e).attr("href",r.render(o[t].url,n))}))}),setTimeout(function(){var e=d.left-i.width()/2+p.width()/2,n=d.top-i.height()-5;t.view.wrapper.find("."+l.listCls).find("."+l.floorCls.toolBar).delCls(l.stateCls.visibleShare),i.css({left:e+"px",top:n+"px"}),p.parentToLevel(3).addCls(l.stateCls.visibleShare),i.lastTarget=p},200)},hide:function(){t.view.wrapper.find("."+l.listCls).find("."+l.floorCls.toolBar).delCls(l.stateCls.visibleShare),i&&i.css({left:"-999px",top:"-999px"}),i&&i.lastTarget&&i.lastTarget.parentToLevel(3).delCls(l.stateCls.visibleShare)}}}(window.Tie),function(t){function e(e,n){var i=c.render(t.setting.baseDataURL+"/users/myInfo",e);c.getData({url:i},n),c.cookie.del(o.userInfo,o.global,"/")}var n,i,s,o={sInfo:"S_INFO",pInfo:"P_INFO",userInfo:"NTES_CMT_USER_INFO",global:".163.com"},a={skin:0,isHttps:1,product:"tie",promark:"cGTVPrV",host:"tie.163.com",includeBox:"tie-urs-wrap",page:"login",single:1,loginText:"\u767b\u5f55",gotoRegText:"\u6ce8\u518c",placeholder:{account:"\u7f51\u6613\u90ae\u7bb1/\u5e38\u7528\u90ae\u7bb1",pwd:"\u8bf7\u8f93\u5165\u5bc6\u7801"},notFastReg:0,needanimation:0,needUnLogin:1,defaultUnLogin:1,cssDomain:"http://img2.cache.netease.com/f2e/products/tie/",cssFiles:"urs_tie.css",errMsg:"",logincb:function(t){n.css({display:"none"}),l.loginSuccess()},loginstate:function(t){t.state?(n.css({display:"none"}),l.loginSuccess()):n.css({display:"block"})},resize:function(t){},initReady:function(){}},r=['<div class="tie-urs-area">','<div class="urs-mask"></div>','<div class="urs-wrap" id="tie-urs-wrap">','<div class="cls-btn" id="urs-cls-btn"></div>',"</div>","</div>"].join(""),l={init:function(n,i){var s=c.cookie.get(o.pInfo).split("|"),a=c.cookie.get(o.sInfo),r=c.cookie.get(o.userInfo),l=""!==a;l?r?(r=r.split("|"),c.base64Encode(s[0])===r[4]?(t.global.user={userId:r[0],nickname:r[1],avatar:r[2],anonymous:r[3],username:r[4]},i(t.global.user)):e(n,i)):e(n,i):i()},login:function(t,e){var n=e.username,s=e.savelogin?1:0;n=/\@/.test(n)?n:n+"@163.com",i.doLoginProxy({username:n,pwd:e.password,defaultUnLogin:s})},beforeLogin:function(e){var n=t.setting,i=e.find("."+n.formCls.userBox),s=e.find("."+n.formCls.pwdBox),o=e.parent().next(),a=e.parentToLevel(2),r=n.stateCls.checkAcnt,l=n.stateCls.checkPwd,c=!1;return a.delCls(r).delCls(l),i.val()?s.val()?c=!0:(a.addCls(l),s[0].focus(),o.html("\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a")):(a.addCls(r),i[0].focus(),o.html("\u8d26\u6237\u4e0d\u80fd\u4e3a\u7a7a")),c},loginSuccess:function(e){l.init(t.global.config,function(e){if(t.global.user=e,t.refreshUserView(),void 0!==window.NTESCommonNavigator){var n=NTESCommonNavigator.core.Controller();n.refresh()}})},loadURS:function(){return i||(n=t.view.wrapper.append(r).child(-1),s=n.child(1).child(0),i=new window.URS(a),s.bind("click",function(t){n.css({display:"none"})})),i}},c=t.tool;t.model=t.model||{},t.model.user=l}(window.Tie),function(t,e){function n(t,n){var i=t.length===n;return i||e.log("\u4f20\u9012\u7684\u53c2\u6570\u4e0d\u7b26\u5408\u8981\u6c42\uff01"),i}function i(t){return E&&(t+=/\?/.test(t)?"&":"?",t+=E),t}function s(t,n){var i=g.post.findById(n)||u;return e.render(t,i)}function o(t){return C.find("."+w.floorCls.oprtBar+"["+w.dataAtr.postId+"='"+t+"']")}function a(t){return t.parentToLevel(2).attr(w.dataAtr.postId)}function r(){var t=C.find("."+w.barCls.input);t.each(function(){var t,n,i=e(this);i.hasCls(w.stateCls.writeMode)&&(t=e.trim(i.find("."+w.formCls.cntBox).val()),n=e.trim(i.find("."+w.formCls.pidBox).val()),i.after(e.render(m.inputBar.writeMode,{content:t,parentId:n})),i.remove())})}function l(t){e.getData({url:"http://comment.news.163.com/statistics.jsp",type:"GET",dataType:"unknown",data:{type:t}})}function c(){/^(\S+\.){2}163.com$/.test(u.host)&&(u.host=RegExp.$1+"163.com"),w.specChannels[u.host]&&(u.host=w.specChannels[u.host])}function p(n){var i=t.view.wrapper.find("."+w.barCls.input),s=w.eventCls.submitBtn,o=w.stateCls.checkAcnt,a=w.stateCls.checkPwd;w.stateCls.inputFold,w.eventCls.inputBar;e(n.target).hasCls(s)||!i.hasCls(o)&&!i.hasCls(a)||i.delCls(o).delCls(a)}var d,u={},h=!1,f={},m=t.tpl,g={},v={},y={},w=t.setting,T=t.model.user,b=null,C={},k=!1,I=w.baseDataURL,x="offset=<% this.offset %>&limit=<% this.limit %>&showLevelThreshold=<% this.showLevelThreshold %>&headLimit=<% this.headLimit %>&tailLimit=<% this.tailLimit %>",_=I+"/threads/<% this.docId %>",S=_+"/comments/<% this.hot %>List?"+x,B=_+"/comments/<% this.xin %>List?"+x,P=_+"/comments",L=P+"/<% this.commentId %>/action/upvote",j=P+"/<% this.commentId %>/action/against",A=P+"/<% this.commentId %>/action/fav",N=P+"/<% this.commentId %>/action/cancleFav",E="ibc=jssdk",D={offset:0,limit:30,showLevelThreshold:70,headLimit:1,tailLimit:2};t.api={getThreadInfo:function(t){if(n(arguments,1)){var s=e.render(_,f);s=i(s),e.getData({url:s},t)}},getHotList:function(t,s,o){if(n(arguments,3)){var a={offset:(t-1)*s,limit:s,hot:h?"specHot":"hot"},r=e.render(S,e.extend(f,D,a));r=i(r),e.getData({url:r},o)}},buildHotView:function(t){this.getHotList(t||1,f.hotSize,function(t){var e=v.hotView.show(),n=e.find("."+w.listCls),i=(e.find("."+w.emptyTipCls),g.post.adaptData(t));n.html(g.post.buildView(i)),i.length<=0?e.hide():g.post.cache(i)})},getNewList:function(t,s,o){if(n(arguments,3)){var a={offset:(t-1)*s,limit:s,xin:h?"specNew":"new"},r=e.render(B,e.extend(f,D,a));r=i(r),e.getData({url:r},o)}},buildNewView:function(n){var n=n||1,i=v.newView;0!==u.tcount&&(i.show(),this.getNewList(n,f.newSize,function(s){var o=i.find("."+w.listCls),a=i.find("."+w.emptyTipCls),r=g.post.adaptData(s);e.extend(t.global.page={},{total:Math.ceil(s.newListSize/f.newSize),current:n}),o.html(g.post.buildView(r)),f.showPaging&&(o.next().hasCls(w.barCls.page)&&o.next().remove(),o.after(e.render(m.pagingPart,t.global.page))),r.length<=0?(a.show(),i.hide()):g.post.cache(r)}))},buildPage:function(){if(!k){if("off"===u.status.web)return void C.remove();v.hotView=C.find("#"+w.barId.hotList).hide(),v.newView=C.find("#"+w.barId.newList).hide(),v.noneTieView=C.find("#"+w.barId.noneTie),v.inputBar=C.find("."+w.barCls.input),f.isShowComments&&e.each(f.mods,function(n,i){var s=e.trim(i);t.api["build"+(s.substring(0,1).toUpperCase()+s.substring(1))]()}),u.tcount>0&&v.noneTieView.hide(),k=!0}}},t.operator={},t.operator.comment=function(t,n){var o=s(P,t.parentId||u.docId);o=i(o),e.getData({url:o,type:"POST",data:e.extend({},t,{parentId:t.parentId.split("_")[1]}),dataType:"json"},n)},t.operator.up=function(t,n){var a=s(L,t);a=i(a),e.getData({url:a,type:"POST",dataType:"unknown"},function(i){var s=o(t).find("."+w.oprtBtnCls.up);s.each(function(t){var n=e(this),i=n.child(0),s=parseInt(i.attr(w.dataAtr.postUp))+1+"";i.html(s),i.attr(w.dataAtr.postUp,s),n.addCls(w.stateCls.visited).delCls(w.oprtBtnCls.up)}),n&&n(i)})},t.operator.down=function(t,n){var a=s(j,t);a=i(a),e.getData({url:a,type:"POST",dataType:"unknown"},function(i){var s=o(t).find("."+w.oprtBtnCls.down);s.each(function(t){var n=e(this),i=n.child(0),s=parseInt(i.attr(w.dataAtr.postDown))+1+"";i.html(s),i.attr(w.dataAtr.postDown,s),n.addCls(w.stateCls.visited).delCls(w.oprtBtnCls.down)}),n&&n(i)})},t.operator.fav=function(t,n){var a=s(A,t);a=i(a),e.getData({url:a,type:"POST",dataType:"unknown"},function(e){var i=o(t).find("."+w.oprtBtnCls.fav);i.delCls(w.oprtBtnCls.fav).addCls(w.oprtBtnCls.cancelFav),i.html(w.oprtBtnTxt.cancelFav),n&&n(e)})},t.operator.cancelFav=function(t,n){var a=s(N,t);a=i(a),e.getData({url:a,type:"POST",dataType:"unknown"},function(e){var i=o(t).find("."+w.oprtBtnCls.cancelFav);i.delCls(w.oprtBtnCls.cancelFav).addCls(w.oprtBtnCls.fav),i.html(w.oprtBtnTxt.fav),n&&n(e)})},g={post:function(t,n,i){var s,o=n.user,a=this;e.extend(this,{id:t,oldId:n.postId&&n.postId.substring(n.postId.indexOf("_")+1),anonymous:n.anonymous,boardId:u.boardId,commentId:n.commentId,photo:o.avatar,pubTime:n.createTime,up:n.vote,down:n.against,nickname:o.nickname,authInfo:o.authInfo,from:o.location,threadId:n.postId.substring(0,n.postId.indexOf("_"))||u.docId,docId:n.postId.substring(0,n.postId.indexOf("_"))||u.docId,cnt:n.content,ip:n.ip||"",userId:o.id||o.userId,userNId:o.userId,voice:a.getVoice(n),source:n.source,shareCount:n.shareCount,favCount:n.favCount,productKey:n.productKey||f.productKey,siteName:n.siteName||"\u7f51\u6613",isUnicom:n.productKey!==f.productKey,type:"trunk",order:1,fresh:n.fresh||!1,groupMemberSize:1}),s=o.title,s&&e.extend(this,{title:s.titleName,titleURL:s.url||w.defaultUserTitleLink,titleInfo:s.info}),h?e.extend(this,{boardId:i.boardId,threadId:i.docId,essayTitle:i.title,essayURL:i.url}):e.extend(this,{id:this.threadId+"_"+this.id})}},g.post.fn=e.extend(g.post.prototype,{getVoice:function(t){var e=null;return e},checkCnt:function(){var t=!1,n="",i=i;return this.cnt=e.trim(this.cnt),this.cnt?/<|>/g.test(this.cnt)?n=i.msg.illegalChar:this.cnt.length>1e3||this.cnt.length<2?n=i.msg.postCntLong:t=!0:n=i.msg.postCntEmpty,{flag:t,msg:n}}}),g.post.init=function(t,n){return{fresh:!0,type:"trunk",pubTime:e.formatDate(),from:"",photo:n.avatar||f.faceUrl,cnt:t,nickname:n.nickname,auditStatus:u.isAudit}},g.post._store=[],g.post.cache=function(t){return t?void(e.isArray(t)?g.post._store=g.post._store.concat(t):g.post._store.push(t)):g.post._store},g.post.adaptData=function(t){var n,i,s,o,a,r,l=t.comments,c=[];n=h?t.commentIdsAndDocId:t.commentIds;for(var p=0;p<n.length;p++){h?(s=n[p].commentIds.split(","),s=e.map(s,function(t){return n[p].docId+"_"+t})):s=n[p].split(","),i=[];for(var d=s.length,u=0;u<d;u++)o=s[u],l[o]&&!l[o].isDel&&(h?(r=t.threads[n[p].docId],a=new g.post(o,l[o],r)):a=new g.post(o,l[o]),a.order=u+1,d!==u+1&&(a.type="quote"),a.groupMemberSize=d,i.push(a));c[p]=i}return c},g.post.buildQuoteNode=function(t,n){var i,s="",o=t.length,a=m.floorPost.upperPart,r=m.floorPost.lowerPart,l=m.floorPost.middlePart,c=e.render;if(o>=f.startHideMdl&&"off"===n){var p=c(a,t[0])+c(r,t[0]),d=c(a,{order:2})+p+c(l,{hideMdlNum:o-2}),u=c(a,t[o-1])+d+c(r,t[o-1]);s=u}else if(f.nestedHierarchy>o)for(var h=0;h<o;h++)i=t[h],s=c(a,i)+s+c(r,i);else for(var g=Math.round(f.nestedHierarchy/2),h=0;h<o;h++)i=t[h],s=h<g||h>o-g?c(a,i)+s+c(r,i):s+c(a,i)+c(r,i);return s},g.post.buildTrunkNode=function(t,n){var i=t.length,s=t[i-1],o=t.slice(0,i-1),n=n||"off";return e.render(m.trunkPost.upperPart,s)+g.post.buildQuoteNode(o,n)+e.render(m.trunkPost.lowerPart,s)},g.post.newTrunkNode=function(t,n){if(t){var i=g.post.findTopsInGroup(t);i.length;return e.render(m.trunkPost.upperPart,n)+g.post.buildQuoteNode(i,!1)+e.render(m.trunkPost.lowerPart,n)}return e.render(m.trunkPost.upperPart,n)+e.render(m.trunkPost.lowerPart,n)},g.post.buildView=function(t){for(var e="",n=0,i=t.length;n<i;n++)e+=g.post.buildTrunkNode(t[n]);return e},g.post.findGroupById=function(t,e){for(var n=null,i=0;i<t.length;i++){n=t[i];var s=n.length-1;if(n[s].id===e)return n}},g.post.findTopsInGroup=function(t,e){for(var n,e=e||g.post.cache(),i=null,s=0;s<e.length;s++){i=e[s];for(var o=0;o<i.length;o++)if(n=i[o],n.id===t)return i.slice(0,o+1)}},g.post.findById=function(t,e){for(var n,e=e||g.post.cache(),i=null,s=0;s<e.length;s++){i=e[s];for(var o=0;o<i.length;o++)if(n=i[o],n.id===t)return n}},y={create:function(t){var n=function(){this.init.apply(this,arguments)};return n.fn=n.prototype,n.fn.init=function(){},n.fn.eventSplitter=/^(\w+)\s*(.*)$/,n.fn.delegateEvents=function(){for(var t in this.events){var n=this.events[t],i=this[n],s=t.match(this.eventSplitter),o=s[1],a=e.render(s[2],w);""===a?this.el.on(o,i):this.el.on(o,a,i)}},n.fn.$=function(t){return e(t,this.el[0])},n.fn.refreshElements=function(){for(var t in this.elements)this[this.elements[t]]=this.$(t)},n.include=function(t){e.extend(this.fn,t)},t&&n.include(t),n}},y.viewCtrl=y.create({events:{"click .<% this.eventCls.inputBar %>":"changeInputState","click .<% this.floorCls.trunk %> .<% this.floorCls.middle %>":"expandMdlFlr","click .<% this.floorCls.trunk %> .<% this.oprtBtnCls.reply %>":"buildReplyBox","click .<% this.floorCls.trunk %> .<% this.oprtBtnCls.up %>":"upPost","click .<% this.floorCls.trunk %> .<% this.oprtBtnCls.down %>":"downPost","click .<% this.floorCls.trunk %> .<% this.oprtBtnCls.fav %>":"favPost","click .<% this.floorCls.trunk %> .<% this.oprtBtnCls.cancelFav %>":"cancelFavPost","click .<% this.floorCls.trunk %> .<% this.oprtBtnCls.share %>":"shareWin","click .<% this.barCls.page %> .<% this.pageCls.actionBtn %>, .<% this.barCls.page %> .<% this.pageCls.numBtn %>":"changePage","click .<% this.eventCls.submitBtn %>":"submitPost","click .<% this.eventCls.acntEmpty %>":"hideUserInputTip","click .<% this.eventCls.pwdEmpty %>":"hideUserInputTip","blur .<% this.eventCls.acntInput %>":"showUserInputTip","blur .<% this.eventCls.pwdInput %>":"showUserInputTip","click a":"statistic","keyup .<% this.eventCls.pwdInput %>":"enterLogin"},init:function(n){try{document.domain="163.com"}catch(i){e.log(i)}this.el=n,this.refreshElements(),this.delegateEvents(),e(document.body).on("click",function(n){var i=e(n.target);i.hasCls(w.oprtBtnCls.share)||t.share.hide()})},changeInputState:function(t){var n=e(this),i=w.stateCls.inputFold;w.stateCls.writeMode;n.hasCls(i)&&n.delCls(i),p(t)},showCntTip:function(t){!e.trim(e(this).val())&&e(this).next().show()},submitPost:function(n){var i,s,o,a,c=e(this);b||t.global.user?(s=c.parent().prev(),o=e.getFormData(s),s.child(0).val(""),w.callback.beforeSubmitPost(o)&&(a=window.open("about:blank","_blank"),o.parentId&&(o.fromDocId=u.docId),t.operator.comment(o,function(t){var n;"commentPage"===f.submitType?u.isAudit&&e.cookie.set(e.render(w.cookie.newTieId),t.postId,"3m",w.cookie.domain,"/"):(n=g.post.init(o.content,b),v.hotView.find("."+w.listCls).prepend(g.post.newTrunkNode(o.parentId,n))),l(o.parentId?w.statistic.replySubmit:w.statistic.postSubmit)}),e.cookie.set(w.cookie.toCommentPage,1,.6,w.cookie.domain,"/"),a.location.href=u.commentPageURL)):(i=c.prev().prev(),T.beforeLogin(i)&&T.login(i.attr("action"),e.getFormData(i),function(e){"success"===e.status?T.init(f,function(e){t.global.user=b=e,b&&r(),T.loginSuccess(b),l(w.statistic.loginSubmit)}):T.loginFailure(c,b)},i))},expandMdlFlr:function(t){t.preventDefault();var n=e(this),i=n.parents()[5],i=e(i),s=i.attr(w.dataAtr.postId),o=g.post.findGroupById(g.post.cache(),s);l(n.child(0).attr("statistic")),i.before(g.post.buildTrunkNode(o,"on")),i.remove()},buildReplyBox:function(t){var n,i,s,o=e(this),r=a(o),l=w.stateCls,c=w.listCls;o.tglCls(l.active),i=o.hasCls(l.active),C.find("."+c).find("."+w.barCls.input).remove(),C.find("."+c).find("."+w.oprtBtnCls.reply).delCls(l.active),C.find("."+c).find("."+w.floorCls.arrow).hide(),C.find("."+c).find("."+w.floorCls.toolBar).delCls(l.visible),i&&(o.addCls(l.active),o.parentToLevel(3).addCls(l.visible),o.next().show(),n=o.parentToLevel(3),n.after(e.render(m.inputBar.writeMode,{parentId:r,state:"reply"})),s=n.next(),s.find("."+w.formCls.cntBox)[0].focus())},upPost:function(n){var i=a(e(this)),s=e(this).prev();t.operator.up(i,function(){s.addCls(w.stateCls.visible)})},enterPost:function(t){e(this).addCls("hover-txt")},leavePost:function(t){e(this).delCls("hover-txt")},downPost:function(n){var i=a(e(this)),s=e(this).prev();t.operator.down(i,function(){s.addCls(w.stateCls.visible)})},favPost:function(n){var i=a(e(this));t.operator.fav(i,function(){})},cancelFavPost:function(n){var i=a(e(this));t.operator.cancelFav(i)},shareWin:function(n){var i=e(this),s=a(i),o=g.post.findById(s);t.share.show(u,o,i)},changePage:function(n){n.preventDefault();var i=e(n.target),s=t.global.page,o=s.current;i.attr(w.dataAtr.page.prev)?s.current>1&&o--:i.attr(w.dataAtr.page.next)?s.current<s.total&&o++:i.attr(w.dataAtr.page.num)&&(o=parseInt(i.attr(w.dataAtr.page.num))),s.current!==o&&t.api.buildNewView(o)},showUserInputTip:function(t){e.trim(e(this).val())||e(this).next().show()},hideUserInputTip:function(t){e(this).hide().prev()[0].focus()},statistic:function(t){e(this).attr("statistic")&&l(e(this).attr("statistic"))},enterLogin:function(n){if(13===n.keyCode){var i=e(this).parent(),s=e(this);T.beforeLogin(i)&&T.login(i.attr("action"),e.getFormData(i),function(e){"success"===e.status?T.init(f,function(e){t.global.user=b=e,b&&r(),T.loginSuccess(b)}):T.loginFailure(s,b)},i)}}}),t.refreshUserView=r,t.operator.actionStatistic=l,t.view=t.view||{},t.init=function(n,i){e.extend(f,w.defaultConfig,n),t.model=g,t.api.getThreadInfo(function(n){u=n,u.joinCount=u.rcount+u.cmtAgainst+u.cmtVote,u.productKey=f.productKey,window.tieChannel?u.host=window.tieChannel+".163.com":u.host=u.url.substring(7,u.url.indexOf("/",9)),c(),u.commentPageHost="comment."+u.host,u.commentPageURL="http://"+u.commentPageHost+"/"+u.boardId+"/"+u.docId+".html",h=0===u.docId.indexOf("SPEC"),e.extend(t.global=t.global||{},{config:f,threadInfo:u}),t.view.hideInputCheckTips=p,T.init(f,function(n){t.global.user=b=n,t.view.wrapper=C=e(f.target).append(e.render(m.layout)).find("#"+w.wrapperId),new y.viewCtrl(C),t.api.buildPage(),b||(d=T.loadURS()),i&&i(u),"function"==typeof window.containerHandle&&window.containerHandle(t),k=!1})})}}(window.Tie,window.Tie.tool);
